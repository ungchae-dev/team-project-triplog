<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>음악 슬라이드</title>
    <style>
        .track { display: none; text-align: center; }
        .track.active { display: block; }
    </style>
</head>
<body>
<h1>🎧 음악 둘러보기</h1>

<!-- 음악 리스트 반복 출력 -->
<div th:each="track, iterStat : ${musicList}"
     th:id="'track-' + ${iterStat.index}"
     th:class="'track track-' + ${iterStat.index}">
    <p><strong th:text="${track.title}">노래 제목</strong> - 
       <span th:text="${track.artist}">가수명</span></p>
    <img th:src="${track.album}" alt="앨범 이미지" width="200" />
    <div th:if="${track.musicFile != null}">
        <audio controls th:src="${track.musicFile}"></audio>
    </div>
</div>

<!-- 이전/다음 버튼 -->
<div style="text-align:center; margin-top: 1rem;">
    <button onclick="showPrev()">이전</button>
    <button onclick="showNext()">다음</button>
</div>

<!-- 스크립트: DOM이 로드된 후 실행 -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        let current = 0;
        const tracks = document.querySelectorAll('.track');

        function updateView() {
            tracks.forEach((track, idx) => {
                track.classList.toggle('active', idx === current);
            });
        }

        window.showNext = function () {
            if (current < tracks.length - 1) current++;
            updateView();
        }

        window.showPrev = function () {
            if (current > 0) current--;
            updateView();
        }

        // 최초 1회 렌더링
        updateView();
    });
</script>
</body>
</html>