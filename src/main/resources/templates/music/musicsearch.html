<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ìŒì•… ìŠ¬ë¼ì´ë“œ</title>
    <style>
        .track { display: none; text-align: center; }
        .track.active { display: block; }
    </style>
</head>
<body>
<h1>ğŸ§ ìŒì•… ë‘˜ëŸ¬ë³´ê¸°</h1>

<!-- ìŒì•… ë¦¬ìŠ¤íŠ¸ ë°˜ë³µ ì¶œë ¥ -->
<div th:each="track, iterStat : ${musicList}"
     th:id="'track-' + ${iterStat.index}"
     th:class="'track track-' + ${iterStat.index}">
    <p><strong th:text="${track.title}">ë…¸ë˜ ì œëª©</strong> - 
       <span th:text="${track.artist}">ê°€ìˆ˜ëª…</span></p>
    <img th:src="${track.album}" alt="ì•¨ë²” ì´ë¯¸ì§€" width="200" />
    <div th:if="${track.musicFile != null}">
        <audio controls th:src="${track.musicFile}"></audio>
    </div>
</div>

<!-- ì´ì „/ë‹¤ìŒ ë²„íŠ¼ -->
<div style="text-align:center; margin-top: 1rem;">
    <button onclick="showPrev()">ì´ì „</button>
    <button onclick="showNext()">ë‹¤ìŒ</button>
</div>

<!-- ìŠ¤í¬ë¦½íŠ¸: DOMì´ ë¡œë“œëœ í›„ ì‹¤í–‰ -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        let current = 0;
        const tracks = document.querySelectorAll('.track');

        function updateView() {
            tracks.forEach((track, idx) => {
                track.classList.toggle('active', idx === current);
            });
        }

        window.showNext = function () {
            if (current < tracks.length - 1) current++;
            updateView();
        }

        window.showPrev = function () {
            if (current > 0) current--;
            updateView();
        }

        // ìµœì´ˆ 1íšŒ ë Œë”ë§
        updateView();
    });
</script>
</body>
</html>