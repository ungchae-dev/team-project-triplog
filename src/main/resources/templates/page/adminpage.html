<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>관리자 페이지</title>
  <link href="/css/admin.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="admin-container">
  <aside class="admin-sidebar">
    <h2>관리자 메뉴</h2>
    <ul>
      <li class="menu-item active" data-section="posts">게시글/댓글 관리</li>
      <li class="menu-item" data-section="acorn">도토리 구매 통계</li>
      <li class="menu-item" data-section="notice">공지사항</li>
    </ul>
  </aside>

  <main class="admin-main">
    <header>
      <h1>관리자 대시보드</h1>
      <div class="admin-profile">
        <span th:text="${nickname}"></span>
        <button class="notice-btn">공지 작성</button>
        <button class="logout-btn">로그아웃</button>
      </div>
    </header>

    <!-- 게시글/댓글 관리 -->
    <section class="admin-content" id="section-posts">
      <h2>게시글/댓글 관리</h2>
      <table class="admin-table" id="postsTable">
        <thead>
        <tr>
          <th>ID</th>
          <th>타입</th>
          <th>닉네임</th>
          <th>제목 / 내용</th>
          <th>작성일</th>
          <th>삭제</th>
        </tr>
        </thead>
        <tbody id="adminPostCommentBody"></tbody>
      </table>
    </section>

    <!-- 도토리 구매 통계 -->
    <section class="admin-content" id="section-acorn" style="display: none;">
      <h2>월별 도토리 구매 통계</h2>
      <div style="max-width: 600px; margin: 30px auto;">
        <canvas id="acornChart"></canvas>
      </div>
    </section>

    <!-- 공지사항 관리 -->
    <section class="admin-content" id="section-notice" style="display: none;">
      <h2>공지사항 목록</h2>
      <table class="admin-table" id="noticeTable">
        <thead>
        <tr>
          <th>번호</th>
          <th>제목</th>
          <th>내용</th>
          <th>작성자</th>
          <th>작성일</th>
          <th>관리</th>
        </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>
</div>

<!-- 공지사항 모달 -->
<div id="noticeWriteModal" class="modal-backdrop" style="display: none;">
  <div class="modal-box">
    <div class="modal-header" id="noticeModalHeader">공지사항 작성</div>
    <form class="modal-form">
      <input type="hidden" id="noticeId" />
      <input type="text" id="noticeTitle" placeholder="공지사항 제목" required />
      <textarea id="noticeContent" placeholder="공지사항 내용" rows="4" required></textarea>
      <div class="modal-actions">
        <button type="submit" class="submit-btn">등록</button>
        <button type="button" class="close-btn">취소</button>
      </div>
    </form>
  </div>
</div>

<!-- 로그인 사용자 닉네임 전역 변수 전달 -->
<script th:inline="javascript">
  const currentUserNickname = [[${nickname}]];
</script>

<!-- JS 파일 로드 -->
<script src="/js/admin.js"></script>
</body>
</html>
